{% extends "base.html" %}
{% block title %}
注册
{% endblock %}
{% block style%}
<link rel="stylesheet" type="text/css" href="/static/css/font-awesome.css">
{% endblock%}

{%block main%}
<ul class="body-nav">
    <li>
        <a href="/">
            <i class="icon-home">
            </i>
            &nbsp;澳洲一刻
        </a>
    </li>
</ul>

<div class="organ signup nav-shadow">
    <div class="organ-head">
        注册
    </div>
    <div class="organ-body">
        <form id="signup_form" action="/signup" method="post" class="fm">
            <input type="hidden" name="_xsrf" value="1d3a8a09b0f94aa7bd5fa65aec9ff416"
            />
            <div class="fm-row">
                <div class="fm-item fm-required">
                    <label class="fm-label" for="fm-name">
                        用户名
                    </label>
                    <input class="fm-text" id="fm-name" maxlength="16" name="name" size="30"
                    type="text" value="">
                </div>
                <div class="fm-explain">
                    用户名只能包含英文字母和数字
                </div>
            </div>
            <div class="fm-row">
                <div class="fm-item fm-required">
                    <label class="fm-label" for="fm-email">
                        邮箱
                    </label>
                    <input class="fm-text" id="fm-email" maxlength="30" name="email" size="30"
                    type="text" value="">
                </div>
                <div class="fm-explain">
                    邮箱用于管理帐户
                </div>
            </div>
            <div class="fm-row">
                <div class="fm-item fm-required">
                    <label class="fm-label" for="fm-password">
                        密码
                    </label>
                    <input class="fm-text" id="fm-password" maxlength="24" name="password"
                    size="30" type="password" value="">
                </div>
                <div class="fm-explain">
                    密码最少 6 字节
                </div>
            </div>
            <div class="fm-row">
                <div class="fm-item fm-required">
                    <label class="fm-label" for="fm-password2">
                        密码确认
                    </label>
                    <input class="fm-text" id="fm-password2" maxlength="24" name="password2"
                    size="30" type="password" value="">
                </div>
            </div>
            <div class="fm-action">
                <button type="submit" class="btn">
                    注册 
                </button>
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block script %}
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js" type="text/javascript" charset="utf-8" ></script>

<script>
$(document).ready(function () {

    $('#signup_form').validate({ // initialize the plugin
        rules: {
            name: {
                required: true,
            },
            email: {
                required: true,
                email: true
            },
            password: {
                required: true,
            },
            password2: {
                required: true,
            }
        },
        submitHandler: function (form) { // for demo
            alert('valid form submitted'); // for demo
            return false; // for demo
        }
    });

});



function validate_required(field, alerttxt)
{
    with (field)
      {
          if (value==null||value=="")
            { 
                alert(alerttxt);
                return false;
            }
          else {return true;}
      }
}

function validate_email(field, alerttxt)
{
    with (field)
    {
        apos = value.indexOf("@");
        dotpos = value.lastIndexOf(".");
        if (apos < 1 || dotpos - apos < 2)
        {
                alert(alerttxt);
                return false;
        }
        else
        {
            return true;
        }
    }
    
}

function validate_form(thisform)
{
    with (thisform)
      {
          if (validate_required(email,"Email must be filled out!")==false  || validate_email(email, "Email format is not right!") == false)
            {
                fm-email.focus();
                return false;
            }
      }
}


</script>
{% endblock %}
